!function(n){"use strict";n.mooLib={},n.mooLib.createID=function(n){return{name:n}},n.mooLib.isCreationOf=function(n,t){return n&&"object"==typeof n&&n.ID===t},n.mooLib.options={},n.mooLib.options.ID=n.mooLib.createID(),n.mooLib.options.create=function(t){function e(t,e){n.isArray(e)?e.forEach(function(n){t.behind(n)}):t.behind(e)}function o(t,e){return t?("string"==typeof t&&(t=t.split(".")),n.mooLib.isCreationOf(e,n.mooLib.options.ID)?e.grab(t):t.length&&e&&"object"==typeof e?1===t.length?e[t]:o(t.slice(1),e[t[0]]):void 0):void 0}var i={};return i.optionStream=[],i.ID=n.mooLib.options.ID,n.extend(i,{grabEach:function(n){var t=i.optionStream,e=[];return t.forEach(function(t){var i=o(n,t);e.push(i)}),e},getEach:function(t){var e=i.grabEach(t),o=n.mooLib.options.create();return e.forEach(function(n){o.behind(n)}),o},tryToCreate:function(t){return n.isArray(t)?n.mooLib.options.create(t):t},behind:function(t){return t=this.tryToCreate(t),(t&&"object"==typeof t||n.mooLib.isCreationOf(t,n.mooLib.options.ID))&&i.optionStream.push(t),i},front:function(t){return t=this.tryToCreate(t),(t&&"object"==typeof t||n.mooLib.isCreationOf(t,n.mooLib.options.ID))&&i.optionStream.unshift(t),i},grab:function(n){var t;return i.optionStream.every(function(e){return t=o(n,e),void 0!==t?!1:!0}),t}}),e(i,t),i},n.mooLib.eventDispatcher={},n.mooLib.eventDispatcher.basicEvent={},n.mooLib.eventDispatcher.basicEvent.ID=n.mooLib.createID(),n.mooLib.eventDispatcher.basicEvent.create=function(){var t={};return t.callbacks=[],n.extend(t,{bind:function(e){n.isFunction(e)&&t.callbacks.push(e)},unbind:function(e){return n.isFunction(e)?n.each(t.callbacks,function(n,o){o===e&&t.callbacks.splice(n,1)}):t.callbacks=[],t},once:function(e){var o;return n.isFunction(e)&&(o=function(n){e.call(this,n),t.unbind(o)},t.bind(o)),t},dispatch:function(n,e){for(var o,i=t.callbacks.length;i--;)o=t.callbacks[i],o&&o.call(e,{response:n});return t}}),t},n.mooLib.eventDispatcher.ID=n.mooLib.createID(),n.mooLib.eventDispatcher.create=function(){var t={};return t.eventContainer={},n.extend(t,{createEventContainer:function(e){return e in t.eventContainer||(t.eventContainer[e]=n.mooLib.eventDispatcher.basicEvent.create()),t.eventContainer[e]},bindAllWith:function(e,o){return n.isArray(e)&&n.each(e,function(n,e){t.bind(e,o)}),t},multipleBind:function(e){return n.isPlainObject(e)&&n.each(e,function(n,e){t.bind(n,e)}),t},once:function(n,e){var o=t.createEventContainer(n);return o.once(e)},bind:function(n,e){var o=t.createEventContainer(n);return o.bind(e)},unbind:function(n,e){var o=t.createEventContainer(n);return o.unbind(e),t},dispatch:function(n,e){return n in t.eventContainer&&t.eventContainer[n].dispatch(e),t}}),t},n.mooLib.sliceArguments=function(n,t,e){return Array.prototype.slice.call(n,t,e)},n.mooLib.applyFunction=function(t,e,o){return n.isFunction(t)?t.apply(e,o):void 0},n.mooLib.callFunction=function(t,e){return n.mooLib.applyFunction(t,e,n.mooLib.sliceArguments(arguments,2))},n.mooLib.timeoutInterval=function(t,e){function o(){r.dontResume||(r.id=setTimeout(function(){r.dontResume=n.mooLib.callFunction(t,null,i),o()},e))}function i(){clearTimeout(r.id)}var r={id:null,dontResume:!1};r.dontResume=n.mooLib.callFunction(t,null,i),o()},n.mooLib.asyncAll=function(t){var e,o=n.Deferred(),i=0,r=[],a=function(n,t){r[n]=t,i++,i===e&&o.resolve(r)};return n.isArray(t)||(t=[t]),(e=t.length)?(n.each(t,function(t,e){n.when(n.isFunction(e)&&e()||e).then(function(n){a(t,n)}).progress(function(n){o.notify(n)}).fail(function(n){o.fail(n)})}),o.promise()):(o.resolve(),o.promise())},n.mooLib.deferSyncFirst={},n.mooLib.deferSyncFirst.ID=n.mooLib.createID(),n.mooLib.deferSyncFirst.create=function(t){function e(t,e){return n.isArray(e)?e:[e]}var o={};return o.ID=n.mooLib.deferSyncFirst.ID,o.i=0,o.deferred=n.Deferred(),o.promises=e(o,t),n.extend(o,{load:function(){var t,e=o.deferred,i=o.promises.length;return"resolved"!==e.state()&&o.i<i&&(t=this.promises[o.i++],n.when(n.isFunction(t)&&t()||t).then(function(n){e.resolve(n)}).progress(function(n){e.notify({type:"progress",data:n})}).fail(function(n){o.i<i&&"resolved"!==e.state()?(e.notify({type:"failure",data:n}),o.load()):e.fail(n)})),o}}),o.load(),o},n.mooLib.deferSyncFirstPromise=function(t){return n.mooLib.deferSyncFirst.create(t).deferred.promise()},n.mooLib.createHolder=function(n,t){var e={},o={};return e.length=1,o.pleaseWait=function(){return e.length=e.length+1,this},o.pleaseGo=function(){e.length=e.length-1,e.length||"function"!=typeof n||n()},o.stopCallbacks=[],o.onStop=function(n){"function"==typeof n&&o.stopCallbacks.push(n)},o.stop=function(){o.stopCallbacks.forEach(function(n){n()}),o.timeoutIds.forEach(function(n){clearTimeout(n)}),o.intervalIds.forEach(function(n){clearInterval(n)}),"function"==typeof t&&t(),o=null},o.timeoutIds=[],o.timeout=function(n,t){var e=setTimeout(n,t);return o.timeoutIds.push(e),e},o.intervalIds=[],o.interval=function(n,t){var e=setInterval(n,t);return o.intervalIds.push(e),e},{interval:o.interval,timeout:o.timeout,onStop:o.onStop,stop:o.stop,pleaseWait:o.pleaseWait,pleaseGo:o.pleaseGo}},n.mooLib.requestAnimationFrame=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.WebkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.MozRequestAnimationFrame||window.msRequestAnimationFrame||window.MsRequestAnimationFrame,function(){var t=n("<div>"),e="",o="";t.css({transformStyle:"preserve-3d",transform:"translateZ(150px)"}),n.mooLib.support3d=!1,n.mooLib.support2d=!1,n.mooLib.preserve3d=!1,document.body.appendChild(t[0]),o=t.css("transform-style"),e=t.css("transform"),"preserve-3d"===o&&(n.mooLib.preserve3d=!0),e.match("matrix3d")?(n.mooLib.support3d=!0,n.mooLib.support2d=!0):(t.css({transform:"translateX(150px)"}),e=t.css("transform"),e.match("matrix")&&(n.mooLib.support2d=!0)),document.body.removeChild(t[0])}()}(jQuery);
